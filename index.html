<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkiLabs | Academy Terminal</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #4f46e5; --accent: #06b6d4; --gold: #d97706; --bg: #f1f5f9; --panel: #ffffff; --border: #cbd5e1; --text: #0f172a; }
        .gold-theme { --primary: #92400e; --accent: #d97706; --bg: #fffcf0; --border: #fbbf24; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; transition: 0.8s; }
        
        /* Sidebar & Layout */
        #sidebar { width: 280px; background: white; border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 30px 20px; flex-shrink: 0; transition: 0.3s; }
        .nav-btn { padding: 16px; margin-bottom: 10px; border-radius: 14px; cursor: pointer; color: #64748b; border: 1px solid transparent; background: none; text-align: left; width: 100%; font-size: 1rem; font-weight: 600; font-family: inherit; transition: 0.2s; }
        .nav-btn.active { background: var(--primary); color: white; box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3); }
        #main { flex-grow: 1; overflow-y: auto; padding: 40px 20px; }
        .view { display: none; max-width: 600px; margin: 0 auto; padding-bottom: 100px; }
        .active-view { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Panels & Cards */
        .glass-panel { background: var(--panel); border: 1px solid var(--border); border-radius: 24px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .archive-card { border-left: 4px solid var(--primary); padding: 15px; margin-bottom: 15px; background: #fff; border-radius: 0 16px 16px 0; box-shadow: 2px 2px 10px rgba(0,0,0,0.02); }
        .quiz-opt { width: 100%; padding: 18px; border: 2px solid #e2e8f0; border-radius: 16px; background: white; text-align: left; font-size: 1rem; cursor: pointer; transition: 0.2s; margin-bottom: 10px; font-weight: 500; }
        .error-shake { animation: shake 0.4s; border-color: #ef4444 !important; background: #fef2f2; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

        /* Certificate Styling */
        #cert-container { display: none; text-align: center; border: 8px double var(--gold); padding: 40px; background: white; border-radius: 10px; position: relative; }
        
        #ai-toggle { position: fixed; bottom: 25px; right: 25px; background: var(--primary); color: white; width: 65px; height: 65px; border-radius: 50%; border: none; font-size: 1.6rem; z-index: 3000; }
        #ai-window { display: none; position: fixed; bottom: 100px; right: 20px; left: 20px; height: 55vh; max-width: 420px; margin: 0 auto; background: white; border-radius: 28px; border: 1px solid var(--border); flex-direction: column; overflow: hidden; z-index: 3000; }
        #ai-chat { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; background: #f8fafc; }
        .bubble { padding: 14px 18px; border-radius: 20px; max-width: 85%; font-size: 0.9rem; }
        .ai-bub { background: white; border: 1px solid var(--border); align-self: flex-start; }
        .user-bub { background: var(--primary); color: white; align-self: flex-end; }
        .secret-bub { background: #fff1f2; color: #9f1239; border: 1px solid #fecdd3; align-self: flex-start; white-space: pre-line; font-style: italic; }

        @media (max-width: 768px) { #sidebar { position: fixed; left: -100%; height: 100%; z-index: 5000; } #sidebar.open { left: 0; } }
        #login-screen { position: fixed; inset: 0; background: #0f172a; z-index: 9999; display: flex; align-items: center; justify-content: center; padding: 20px; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="glass-panel" style="text-align:center; width:100%; max-width:380px;">
        <h1 style="color:var(--primary); font-size:2.2rem; margin-bottom:5px;">SkiLabs_</h1>
        <input type="text" id="username-input" style="width:100%; padding:18px; margin-bottom:15px; border:2px solid #e2e8f0; border-radius:16px; text-align:center;" placeholder="Enter Name">
        <button class="nav-btn" style="background:var(--primary); color:white; text-align:center; padding:18px;" onclick="handleLogin()">ACCESS SYSTEM</button>
        <p style="font-size: 0.7rem; color: #94a3b8; margin-top: 25px;">CHIEF ARCHITECT: CALEB FIIFI ASARE</p>
    </div>
</div>

<nav id="sidebar">
    <div style="font-weight:900; font-size:1.8rem; color:var(--primary); margin-bottom:40px;">SkiLabs.</div>
    <button id="nav-dash" class="nav-btn active" onclick="nav('dash', this)">üè† Overview</button>
    <button class="nav-btn" onclick="nav('gauntlet', this)">‚öîÔ∏è Gauntlet</button>
    <button class="nav-btn" onclick="nav('glossary', this)">üìñ Data Archive</button>
    <button class="nav-btn" onclick="nav('trophy', this)">üèÜ Trophy Room</button>
</nav>

<main id="main">
    <section id="dash" class="view active-view">
        <h1 style="font-weight:800;">Command Center</h1>
        <div class="glass-panel">
            <p><b>Researcher:</b> <span id="id-val">---</span></p>
            <p><b>Rank Status:</b> <span id="rank-val" style="color:var(--primary); font-weight:bold;">PROBATION</span></p>
            <div style="margin-top:20px; height:8px; background:#e2e8f0; border-radius:10px; overflow:hidden;"><div id="prog-bar" style="width:0%; height:100%; background:var(--primary); transition:1s;"></div></div>
        </div>
        <div id="academy-invite" style="display:none;" class="glass-panel">
            <h2 style="color:var(--gold);">üöÄ SKILAB ACADEMY</h2>
            <p>Congratulations! Your expertise is required. You are invited to join the <b>Sky Lab Academy</b>.</p>
            <p style="font-style:italic; font-size:0.8rem; color:#64748b;">Awaiting System Update 2.0...</p>
        </div>
    </section>

    <section id="gauntlet" class="view">
        <h1 style="font-weight:800;">Gauntlet</h1>
        <div id="quiz-menu">
            <button class="quiz-opt" onclick="prepareQuiz('Pro')">STAGE 1: PRO</button>
            <button class="quiz-opt" onclick="prepareQuiz('Master')">STAGE 2: MASTER</button>
            <button class="quiz-opt" onclick="prepareQuiz('Elite')">STAGE 3: ELITE</button>
            <div id="adv-box" style="display:none; margin-top:20px; border-top:2px dashed #fbbf24; padding-top:20px;">
                <button class="quiz-opt" style="background:#be123c; color:white;" onclick="prepareQuiz('Ruby')">STAGE 4: RUBY</button>
                <button class="quiz-opt" style="background:#047857; color:white;" onclick="prepareQuiz('Emerald')">STAGE 5: EMERALD</button>
                <button class="quiz-opt" style="background:var(--gold); color:white;" onclick="prepareQuiz('Gold')">FINAL STAGE: GOLD</button>
            </div>
        </div>
        <div id="quiz-active" style="display:none;">
            <div class="glass-panel">
                <div style="display:flex; justify-content:space-between; margin-bottom:20px;"><span id="q-lvl" style="font-weight:bold; color:var(--primary);"></span> <span id="q-num"></span></div>
                <p id="q-txt" style="font-size:1.1rem; font-weight:700;"></p>
                <div id="q-opts"></div>
            </div>
        </div>
    </section>

    <section id="glossary" class="view">
        <h1 style="font-weight:800;">Data Archive</h1>
        <div id="glos-list"></div>
    </section>

    <section id="trophy" class="view">
        <h1 style="font-weight:800;">Trophy Room</h1>
        <div id="cert-container">
            <h1 style="font-family:'JetBrains Mono'; color:var(--gold);">CERTIFICATE OF EXCELLENCE</h1>
            <p>This certifies that</p>
            <h2 id="cert-name" style="text-decoration:underline;"></h2>
            <p>Has successfully completed all stages of the SkiLabs Gauntlet and is recognized as a <b>Gold Master</b>.</p>
            <p style="margin-top:20px; font-size:0.7rem;">Verified by Caleb Fiifi Asare Terminal</p>
        </div>
        <div id="no-cert" class="glass-panel">Complete the Gold Stage to earn your certificate.</div>
    </section>
</main>

<button id="ai-toggle" onclick="toggleAI()">üß†</button>
<div id="ai-window">
    <div style="background:var(--primary); color:white; padding:18px; display:flex; justify-content:space-between;"><b>OMNI_AI</b> <span onclick="toggleAI()" style="cursor:pointer;">‚úï</span></div>
    <div id="ai-chat"></div>
    <div style="padding:15px; display:flex; gap:10px; border-top:1px solid #eee;">
        <input type="text" id="ai-in" placeholder="Query..." style="flex-grow:1; padding:12px; border:1px solid #e2e8f0; border-radius:12px; outline:none;">
        <button onclick="askAI()" style="background:var(--primary); color:white; border:none; border-radius:12px; width:50px;">‚û§</button>
    </div>
</div>

<script>
    let user = "", curLvl = "", qIdx = 0, currentQuestions = [], wins = 0;

    const quizData = {
        Pro: [
            { q: "What is the chemical formula for water?", a: "H2O", o: ["CO2", "HO2", "NaCl", "O2"] },
            { q: "Which planet is known as the Red Planet?", a: "Mars", o: ["Venus", "Jupiter", "Earth", "Saturn"] },
            { q: "Hardest natural substance on Earth?", a: "Diamond", o: ["Gold", "Steel", "Quartz", "Iron"] },
            { q: "Approximate boiling point of water?", a: "100¬∞C", o: ["90¬∞C", "120¬∞C", "212¬∞C", "80¬∞C"] },
            { q: "Main gas humans breathe in?", a: "Oxygen", o: ["Nitrogen", "Carbon", "Helium", "Neon"] },
            { q: "How many planets in our Solar System?", a: "8", o: ["9", "7", "10", "12"] },
            { q: "The powerhouse of the cell is...", a: "Mitochondria", o: ["Nucleus", "Ribosome", "Wall", "DNA"] },
            { q: "Largest ocean on Earth?", a: "Pacific", o: ["Atlantic", "Indian", "Arctic", "Southern"] },
            { q: "Symbol for Gold?", a: "Au", o: ["Ag", "Go", "Gd", "Fe"] },
            { q: "Largest land animal?", a: "Elephant", o: ["Rhino", "Giraffe", "Hippo", "Whale"] }
        ],
        Master: [
            { q: "Value of Absolute Zero?", a: "-273.15¬∞C", o: ["0¬∞C", "-100¬∞C", "-300¬∞C", "-212¬∞C"] },
            { q: "Gas making up 78% of air?", a: "Nitrogen", o: ["Oxygen", "CO2", "Argon", "Hydrogen"] },
            { q: "Bones in adult human body?", a: "206", o: ["200", "210", "205", "300"] },
            { q: "Light speed per second?", a: "300,000 km/s", o: ["150,000 km/s", "10,000 km/s", "500,000 km/s", "Infinite"] },
            { q: "The atomic number of Oxygen?", a: "8", o: ["6", "10", "16", "1"] },
            { q: "Liquid metal at room temp?", a: "Mercury", o: ["Lead", "Gallium", "Bromine", "Silver"] },
            { q: "Who discovered Penicillin?", a: "Fleming", o: ["Pasteur", "Curie", "Newton", "Tesla"] },
            { q: "What is the pH of pure water?", a: "7", o: ["1", "14", "5", "9"] },
            { q: "The center of an atom is called?", a: "Nucleus", o: ["Proton", "Neutron", "Shell", "Core"] },
            { q: "Unit of electrical resistance?", a: "Ohm", o: ["Volt", "Amp", "Watt", "Joule"] }
        ],
        Elite: [
            { q: "Element with symbol 'Fe'?", a: "Iron", o: ["Fluorine", "Fermium", "Silver", "Lead"] },
            { q: "Planet with the most moons?", a: "Saturn", o: ["Jupiter", "Uranus", "Neptune", "Mars"] },
            { q: "Most abundant metal in Earth's crust?", a: "Aluminum", o: ["Iron", "Steel", "Copper", "Gold"] },
            { q: "What type of charge does a neutron have?", a: "Neutral", o: ["Positive", "Negative", "Double Positive", "Variable"] },
            { q: "Study of fungi is called...", a: "Mycology", o: ["Biology", "Zoology", "Botany", "Virology"] },
            { q: "Deepest point in the world's oceans?", a: "Mariana Trench", o: ["Puerto Rico Trench", "Java Trench", "Arctic Basin", "Dead Sea"] },
            { q: "What gas do plants absorb?", a: "Carbon Dioxide", o: ["Oxygen", "Nitrogen", "Methane", "Ozone"] },
            { q: "Newton's First Law is also known as?", a: "Inertia", o: ["Gravity", "Friction", "Momentum", "Reaction"] },
            { q: "Main component of glass?", a: "Silica", o: ["Sodium", "Calcium", "Carbon", "Iron"] },
            { q: "The only bird that can fly backwards?", a: "Hummingbird", o: ["Sparrow", "Eagle", "Penguin", "Parrot"] }
        ],
        Ruby: [
            { q: "What is the rarest blood type?", a: "AB Negative", o: ["O Negative", "A Positive", "B Negative", "O Positive"] },
            { q: "The 'Golden Ratio' is approximately...", a: "1.618", o: ["3.141", "2.718", "1.414", "0.618"] },
            { q: "Which planet rotates on its side?", a: "Uranus", o: ["Neptune", "Saturn", "Jupiter", "Venus"] },
            { q: "The part of the eye that adjusts light?", a: "Iris", o: ["Retina", "Lens", "Cornea", "Pupil"] },
            { q: "Who developed the Polio vaccine?", a: "Salk", o: ["Sabin", "Lister", "Jenner", "Koch"] },
            { q: "What element is used in old thermometer?", a: "Mercury", o: ["Alcohol", "Silver", "Water", "Oil"] },
            { q: "The atmosphere's lowest layer?", a: "Troposphere", o: ["Stratosphere", "Mesosphere", "Exosphere", "Thermosphere"] },
            { q: "Number of teeth in an adult human?", a: "32", o: ["28", "30", "34", "36"] },
            { q: "Symbol for Potassium?", a: "K", o: ["P", "Po", "Ka", "Pt"] },
            { q: "How many elements in the periodic table?", a: "118", o: ["115", "120", "110", "100"] }
        ],
        Emerald: [
            { q: "What is the speed of sound in air?", a: "343 m/s", o: ["299 m/s", "500 m/s", "100 m/s", "1000 m/s"] },
            { q: "The process of a gas turning to liquid?", a: "Condensation", o: ["Evaporation", "Sublimation", "Freezing", "Melting"] },
            { q: "Which vitamin helps blood clot?", a: "Vitamin K", o: ["Vitamin C", "Vitamin D", "Vitamin A", "Vitamin E"] },
            { q: "Largest organ in the human body?", a: "Skin", o: ["Liver", "Lungs", "Brain", "Heart"] },
            { q: "A sound's frequency is measured in?", a: "Hertz", o: ["Decibels", "Watts", "Ohms", "Volts"] },
            { q: "What is the molar mass of water?", a: "18.015 g/mol", o: ["1.008 g/mol", "16.00 g/mol", "22.4 g/mol", "12.01 g/mol"] },
            { q: "Which gas is used in light bulbs?", a: "Argon", o: ["Neon", "Oxygen", "Nitrogen", "Hydrogen"] },
            { q: "The most dense planet in solar system?", a: "Earth", o: ["Jupiter", "Mars", "Saturn", "Mercury"] },
            { q: "How many legs does a spider have?", a: "8", o: ["6", "10", "12", "4"] },
            { q: "Main pigment used in photosynthesis?", a: "Chlorophyll", o: ["Carotene", "Melanin", "Hemoglobin", "Xanthophyll"] }
        ],
        Gold: [
            { q: "Most abundant gas in the universe?", a: "Hydrogen", o: ["Helium", "Oxygen", "Nitrogen", "Carbon"] },
            { q: "What is the charge of an electron?", a: "Negative", o: ["Positive", "Neutral", "Proton", "Ion"] },
            { q: "Planet with the Great Red Spot?", a: "Jupiter", o: ["Mars", "Saturn", "Venus", "Neptune"] },
            { q: "What is the half-life of Carbon-14?", a: "5730 years", o: ["1000 years", "10000 years", "500 years", "2500 years"] },
            { q: "Process where cells divide for growth?", a: "Mitosis", o: ["Meiosis", "Osmosis", "Diffusion", "Photosynthesis"] },
            { q: "Which acid is found in lemons?", a: "Citric Acid", o: ["Acetic Acid", "Lactic Acid", "Hydrochloric Acid", "Nitric Acid"] },
            { q: "The world's largest hot desert?", a: "Sahara", o: ["Gobi", "Kalahari", "Atacama", "Mojave"] },
            { q: "Unit of power?", a: "Watt", o: ["Joule", "Newton", "Volt", "Amp"] },
            { q: "Smallest unit of life?", a: "Cell", o: ["Atom", "Molecule", "Organelle", "Tissue"] },
            { q: "Who is the 'Father of Genetics'?", a: "Mendel", o: ["Darwin", "Linnaeus", "Watson", "Crick"] },
            { q: "The atmospheric layer with the Ozone?", a: "Stratosphere", o: ["Troposphere", "Mesosphere", "Exosphere", "Ionosphere"] },
            { q: "What is 0 Kelvin in Celsius?", a: "-273.15¬∞C", o: ["0¬∞C", "-100¬∞C", "273.15¬∞C", "100¬∞C"] },
            { q: "Symbol for Sodium?", a: "Na", o: ["S", "So", "Sd", "K"] },
            { q: "A polygon with 8 sides?", a: "Octagon", o: ["Hexagon", "Pentagon", "Decagon", "Heptagon"] },
            { q: "The most common element in Earth?", a: "Iron", o: ["Oxygen", "Silicon", "Carbon", "Gold"] },
            { q: "How many chambers in human heart?", a: "4", o: ["2", "3", "1", "6"] },
            { q: "Which planet is the brightest in sky?", a: "Venus", o: ["Mars", "Jupiter", "Saturn", "Mercury"] },
            { q: "Hardest mineral on Mohs scale?", a: "Diamond", o: ["Corundum", "Topaz", "Quartz", "Talc"] },
            { q: "The chemical symbol for Lead?", a: "Pb", o: ["Ld", "Le", "Ag", "Fe"] },
            { q: "A year on Mercury is how long?", a: "88 days", o: ["365 days", "224 days", "687 days", "10 days"] }
        ]
    };

    const glossaryFacts = [
        "1. Water (H2O) is the universal solvent.",
        "2. Diamonds are pure carbon arranged in a crystal.",
        "3. Absolute Zero is the cessation of atomic motion.",
        "4. Mars' dust is iron oxide, identical to rust.",
        "5. Emeralds are Beryl crystals with Chromium.",
        "6. Hydrogen is the fuel for nuclear fusion in stars.",
        "7. Lightning is hotter than the surface of the sun.",
        "8. Venus suffers from a runaway greenhouse effect.",
        "9. Hemoglobin contains iron to carry oxygen.",
        "10. Light travels at 186,000 miles per second.",
        "11. DNA is shaped like a double-helix ladder.",
        "12. Gold is chemically inactive and doesn't rust.",
        "13. Sound cannot travel through a vacuum.",
        "14. Bees can see ultraviolet light patterns.",
        "15. Plastic can remain in the ocean for centuries.",
        "16. The Sun holds 99.8% of the Solar System's mass.",
        "17. Sharks have no bones, only cartilage.",
        "18. A neutron star is incredibly dense matter.",
        "19. Plants produce oxygen as a byproduct of food.",
        "20. Earth's magnetic field protects us from solar wind.",
        "21. Butterflies have 12,000 eyes in two groups.",
        "22. Bananas contain potassium, a vital electrolyte.",
        "23. Saturn would float in water due to low density.",
        "24. The human brain is 75% water.",
        "25. Glass is cooled liquid that behaves like solid.",
        "26. Ants communicate using chemical pheromones.",
        "27. One year on Venus is 225 Earth days.",
        "28. Helium is used to cool superconducting magnets.",
        "29. Ocean covers 71% of the Earth's surface.",
        "30. Humans share 50% DNA with trees.",
        "31. Cows have a complex stomach for digestion.",
        "32. Gold is so soft it can be molded by hand.",
        "33. Sharks are older than the rings of Saturn.",
        "34. The moon causes the tides on Earth.",
        "35. Clouds are tons of floating water vapor.",
        "36. Blue Whales are larger than any dinosaur.",
        "37. Nitrogen prevents fast combustion on Earth.",
        "38. Metals expand when heated by energy.",
        "39. Polar bears are technically marine mammals.",
        "40. Light takes years to leave the Sun's core.",
        "41. Earth is 4.5 billion years old.",
        "42. Your skin is your primary immune barrier.",
        "43. Boiling point decreases as altitude increases.",
        "44. Jupiter's gravity protects Earth from comets.",
        "45. Humans walk 115,000 miles in a lifetime.",
        "46. Plate tectonics move the continents slowly.",
        "47. A snail can sleep for three whole years.",
        "48. The crust is very thin compared to the core.",
        "49. Most of the universe is Dark Matter.",
        "50. Mercury is shrinking as its core cools down."
    ];

    function handleLogin() {
        const inp = document.getElementById('username-input');
        if(!inp.value) return;
        user = inp.value.trim().toUpperCase();
        document.getElementById('id-val').innerText = user;
        document.getElementById('cert-name').innerText = user;
        document.getElementById('login-screen').style.display = 'none';
        loadGlos();
        addAI("System Online. Access granted to Researcher " + user + ".", 'ai-bub');
    }

    function nav(id, btn) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active-view');
        btn.classList.add('active');
        if(window.innerWidth <= 768) document.getElementById('sidebar').classList.remove('open');
    }

    function toggleAI() { const w = document.getElementById('ai-window'); w.style.display = w.style.display === 'flex' ? 'none' : 'flex'; }

    function loadGlos() {
        const l = document.getElementById('glos-list'); l.innerHTML = "";
        glossaryFacts.forEach((f, i) => {
            l.innerHTML += `<div class="archive-card"><span style="font-family:'JetBrains Mono'; font-size:0.7rem; color:var(--primary);">LOG_${100+i}</span><div>${f}</div></div>`;
        });
    }

    function prepareQuiz(lvl) {
        curLvl = lvl; qIdx = 0;
        currentQuestions = quizData[lvl];
        document.getElementById('quiz-menu').style.display = 'none';
        document.getElementById('quiz-active').style.display = 'block';
        showQ();
    }

    function showQ() {
        const data = currentQuestions[qIdx];
        document.getElementById('q-lvl').innerText = curLvl.toUpperCase() + " STAGE";
        document.getElementById('q-num').innerText = `${qIdx+1} / ${currentQuestions.length}`;
        document.getElementById('q-txt').innerText = data.q;
        const oBox = document.getElementById('q-opts'); oBox.innerHTML = "";
        [data.a, ...data.o].sort(() => Math.random() - 0.5).forEach(opt => {
            const b = document.createElement('button'); b.className = "quiz-opt"; b.innerText = opt;
            b.onclick = () => {
                if(opt === data.a) { qIdx++; if(qIdx < currentQuestions.length) showQ(); else finishQuiz(); }
                else { b.classList.add('error-shake'); setTimeout(() => b.classList.remove('error-shake'), 400); }
            };
            oBox.appendChild(b);
        });
    }

    function finishQuiz() {
        wins++;
        document.getElementById('quiz-active').style.display = 'none';
        document.getElementById('quiz-menu').style.display = 'block';
        document.getElementById('rank-val').innerText = curLvl.toUpperCase();
        document.getElementById('prog-bar').style.width = (wins * 16.6) + "%";
        
        if(curLvl === 'Elite') { 
            document.body.classList.add('gold-theme'); 
            document.getElementById('adv-box').style.display = 'block'; 
        }

        if(curLvl === 'Gold') {
            document.getElementById('no-cert').style.display = 'none';
            document.getElementById('cert-container').style.display = 'block';
            document.getElementById('academy-invite').style.display = 'block';
            addAI("Congratulations Gold Master! Check the Trophy Room for your Certificate. Join SkiLab Academy soon. Wait for update.", 'ai-bub');
        }

        confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 } });
        setTimeout(() => nav('dash', document.getElementById('nav-dash')), 1200);
    }

    function askAI() {
        const i = document.getElementById('ai-in'); const q = i.value.trim().toLowerCase();
        if(!q) return; i.value = ""; addAI(q, 'user-bub');
        if(q === "nk gf") {
            const letter = "TO NHYIRA KARIKARI BONSU:\n\n1. Every line of code I write carries a thought of you.\n2. You are the light that brightens my darkest research days.\n3. In a world full of variables, you are my only constant.\n4. My love for you grows exponentially, far beyond any scale.\n5. You are the most beautiful discovery I have ever made.\n6. Just like a perfect algorithm, you make my life complete.\n7. No matter how complex things get, you are my peace.\n8. I promise to cherish you more with every passing second.\n9. You are the gold at the end of every challenging stage.\n10. Always and forever, you have my heart entirely.";
            setTimeout(() => addAI(letter, 'secret-bub'), 500);
        } else {
            setTimeout(() => addAI("Awaiting update 2.0. Status: " + (wins > 5 ? "Academy Candidate" : "Researching"), 'ai-bub'), 500);
        }
    }

    function addAI(t, c) {
        const chat = document.getElementById('ai-chat'); const d = document.createElement('div');
        d.className = `bubble ${c}`; d.innerText = t; chat.appendChild(d); chat.scrollTop = chat.scrollHeight;
    }
</script>
</body>
</html>
